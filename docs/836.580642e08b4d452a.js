"use strict";(self.webpackChunkweather_app=self.webpackChunkweather_app||[]).push([[836],{1836:(tt,h,i)=>{i.r(h),i.d(h,{HomeModule:()=>R});var Z=i(9320),l=i(3127),m=i(4004),I=i(9646),g=i(810),f=i(6624),t=i(4650),_=i(9653),d=i(3900),T=i(2340),W=i(529);let v=(()=>{class n{constructor(e){this.http=e,this.API_KEY=T.N.API_KEY,this.autocompleteAPI="http://dataservice.accuweather.com/locations/v1/cities/autocomplete",this.currentWeatherAPI="http://dataservice.accuweather.com/currentconditions/v1",this.futureWeatherAPI="http://dataservice.accuweather.com/forecasts/v1/daily/5day",this.locationAPI="http://dataservice.accuweather.com/locations/v1/cities/geoposition/search"}getCityAPI(e){return this.http.get(`${this.autocompleteAPI}?apikey=${this.API_KEY}&q=${e}`)}getCurrentWeather(e){return this.http.get(`${this.currentWeatherAPI}/${e}?apikey=${this.API_KEY}`)}getFutureWeather(e){return this.http.get(`${this.futureWeatherAPI}/${e}?apikey=${this.API_KEY}`)}getByLocation(e,o){return this.http.get(`${this.locationAPI}?apikey=${this.API_KEY}q=${e}%${o}`)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(W.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),w=(()=>{class n{constructor(e){this.apiService=e}getCurrentCity(e){return this.apiService.getCurrentWeather(e.key).pipe((0,m.U)(o=>{const[a]=o;return{temperature:a.Temperature.Imperial.Value,weatherText:a.WeatherText,weatherIcon:a.WeatherIcon,...e}}))}getFutureWeather(e){return this.apiService.getFutureWeather(e).pipe((0,m.U)(o=>o.DailyForecasts.map(a=>({date:new Date(a.Date),temperature:a.Temperature.Maximum.Value,day:a.Day}))))}checkIfFavorite(e,o){return o?.pipe((0,d.w)(a=>e.pipe((0,m.U)(c=>c.filter(q=>q.key==a.key)))))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(v))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var U=i(7009),C=i(1330),s=i(6895),u=i(4006),B=i(8372),y=i(3805),O=i(3238),x=i(7676),P=i(4144);function $(n,r){if(1&n&&(t.TgZ(0,"mat-option",6),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.name," ")}}let S=(()=>{class n{constructor(e){this.apiService=e,this.myControl=new u.NI(""),this.selectedCity=new t.vpe}ngOnInit(){this.filteredOptions=this.myControl.valueChanges.pipe((0,B.b)(400),(0,d.w)(e=>this.getCities(e)))}getCities(e){return this.apiService.getCityAPI(e).pipe((0,m.U)(o=>o.map(a=>({key:a.Key,name:a.LocalizedName}))))}displayFn(e){return e.name}onChangeValue(e){this.selectedCity.emit(e.option.value)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-autocomplete"]],outputs:{selectedCity:"selectedCity"},decls:9,vars:6,consts:[[1,"example-form"],["appearance","outline",1,"example-full-width"],["type","text","placeholder","search","aria-label","Select city","matInput","",3,"formControl","matAutocomplete"],[3,"displayWith","optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,o){if(1&e&&(t.TgZ(0,"form",0)(1,"mat-form-field",1)(2,"mat-label"),t._uU(3,"Select city"),t.qZA(),t._UZ(4,"input",2),t.TgZ(5,"mat-autocomplete",3,4),t.NdJ("optionSelected",function(c){return o.onChangeValue(c)}),t.YNc(7,$,2,2,"mat-option",5),t.ALo(8,"async"),t.qZA()()()),2&e){const a=t.MAs(6);t.xp6(4),t.Q6J("formControl",o.myControl)("matAutocomplete",a),t.xp6(1),t.Q6J("displayWith",o.displayFn),t.xp6(2),t.Q6J("ngForOf",t.lcZ(8,4,o.filteredOptions))}},dependencies:[y.XC,y.ZL,O.ey,x.KE,x.hX,P.Nt,s.sg,u._Y,u.Fj,u.JJ,u.JL,u.oH,s.Ov]}),n})();var J=i(7392),p=i(3546),Y=i(3147),F=i(3799),M=i(370);function H(n,r){if(1&n&&(t.TgZ(0,"p",3),t._uU(1),t.ALo(2,"unitPipe"),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",t.lcZ(2,1,e.weather.temperature),"")}}function N(n,r){if(1&n&&(t.TgZ(0,"p",3),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.weather.temperature," F ")}}function Q(n,r){if(1&n&&(t.ynx(0),t.YNc(1,H,3,3,"p",2),t.YNc(2,N,2,1,"p",2),t.BQk()),2&n){const e=r.ngIf;t.xp6(1),t.Q6J("ngIf","C"===e),t.xp6(1),t.Q6J("ngIf","F"===e)}}let k=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-sm-weather-box"]],inputs:{weather:"weather",temperatureUnits:"temperatureUnits"},decls:8,vars:6,consts:[[1,"sm-card"],[4,"ngIf"],["class","subtext",4,"ngIf"],[1,"subtext"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-title-group")(2,"mat-card-title"),t._uU(3),t.ALo(4,"daysPipe"),t.qZA(),t.TgZ(5,"mat-card-subtitle"),t.YNc(6,Q,3,2,"ng-container",1),t.ALo(7,"async"),t.qZA()()()),2&e&&(t.xp6(3),t.Oqu(t.lcZ(4,2,o.weather.date)),t.xp6(3),t.Q6J("ngIf",t.lcZ(7,4,o.temperatureUnits)))},dependencies:[p.a8,p.C1,p.n5,p.$j,s.O5,s.Ov,F.O,M.x],styles:[".sm-card[_ngcontent-%COMP%]{width:10rem;display:flex;justify-content:center}.mat-card-title[_ngcontent-%COMP%]{margin-bottom:1rem}"]}),n})();function L(n,r){if(1&n&&(t.TgZ(0,"p",7),t._uU(1),t.ALo(2,"unitPipe"),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",t.lcZ(2,1,e.currentCity.temperature),"")}}function j(n,r){if(1&n&&(t.TgZ(0,"p",7),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.currentCity.temperature," F ")}}function K(n,r){if(1&n&&(t.ynx(0),t.YNc(1,L,3,3,"p",6),t.YNc(2,j,2,1,"p",6),t.BQk()),2&n){const e=r.ngIf;t.xp6(1),t.Q6J("ngIf","C"===e),t.xp6(1),t.Q6J("ngIf","F"===e)}}function E(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"mat-icon",8),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.handleFavorite())}),t._uU(1," favorite "),t.qZA()}}function z(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"mat-icon",8),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.handleFavorite())}),t._uU(1," favorite_border"),t.qZA()}}function X(n,r){if(1&n&&(t.ynx(0),t._UZ(1,"app-sm-weather-box",9),t.BQk()),2&n){const e=r.$implicit,o=t.oxw();t.xp6(1),t.Q6J("temperatureUnits",o.temperatureUnits)("weather",e)}}let G=(()=>{class n{constructor(){this.addFavorite=new t.vpe}ngOnInit(){}handleFavorite(){this.addFavorite.emit(this.currentCity)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-weather-box"]],inputs:{currentCity:"currentCity",futureWeather:"futureWeather",temperatureUnits:"temperatureUnits",isFavorite:"isFavorite"},outputs:{addFavorite:"addFavorite"},decls:16,vars:8,consts:[[1,"title-container"],[4,"ngIf"],["class","icon","clickable","",3,"click",4,"ngIf"],[1,"center"],[1,"feature-weathers"],[4,"ngFor","ngForOf"],["class","subtext",4,"ngIf"],[1,"subtext"],["clickable","",1,"icon",3,"click"],[3,"temperatureUnits","weather"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-card")(1,"mat-card-title-group")(2,"mat-card-title")(3,"div",0)(4,"div")(5,"p"),t._uU(6),t.qZA(),t.YNc(7,K,3,2,"ng-container",1),t.ALo(8,"async"),t.qZA()()(),t.YNc(9,E,2,0,"mat-icon",2),t.YNc(10,z,2,0,"mat-icon",2),t.qZA(),t.TgZ(11,"mat-card-content",3)(12,"h1"),t._uU(13),t.qZA(),t.TgZ(14,"div",4),t.YNc(15,X,2,2,"ng-container",5),t.qZA()()()),2&e&&(t.xp6(6),t.Oqu(o.currentCity.name),t.xp6(1),t.Q6J("ngIf",t.lcZ(8,6,o.temperatureUnits)),t.xp6(2),t.Q6J("ngIf",o.isFavorite&&0!==(null==o.isFavorite?null:o.isFavorite.length)),t.xp6(1),t.Q6J("ngIf",0==(null==o.isFavorite?null:o.isFavorite.length)||!o.isFavorite),t.xp6(3),t.Oqu(o.currentCity.weatherText),t.xp6(2),t.Q6J("ngForOf",o.futureWeather))},dependencies:[J.Hw,p.a8,p.C1,p.dn,p.n5,s.sg,s.O5,Y.J,k,s.Ov,F.O],styles:[".icon[_ngcontent-%COMP%]{color:red}.title-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:1rem}.subtext[_ngcontent-%COMP%]{font-size:1rem;color:gray}.center[_ngcontent-%COMP%]{text-align:center}.feature-weathers[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;justify-content:center}"]}),n})();function D(n,r){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"app-weather-box",7),t.NdJ("addFavorite",function(a){t.CHM(e);const c=t.oxw();return t.KtG(c.manageFavorite(a))}),t.ALo(2,"async"),t.ALo(3,"async"),t.qZA(),t.BQk()}if(2&n){const e=r.ngIf,o=t.oxw();t.xp6(1),t.Q6J("currentCity",e)("futureWeather",t.lcZ(2,4,o.futureWeather$))("temperatureUnits",o.temperatureUnits$)("isFavorite",t.lcZ(3,6,o.checkIfFavorite$))}}let A=(()=>{class n{constructor(e,o,a,c){this.store=e,this.homeService=o,this._snackBar=a,this.router=c,this.temperatureUnits$=this.store.select(f.f.wB),this.favoritesCities$=this.store.select(f.f.KM)}ngOnInit(){const e=this.router.snapshot.firstChild?.params;e&&e.key?this.currentCity$=this.favoritesCities$.pipe((0,m.U)(o=>{const a=o.find(c=>c.key==e.key);return this.checkIfFavorite$=this.homeService.checkIfFavorite(this.favoritesCities$,(0,I.of)(a)),this.getFutureWeather(e.key),a})):this.getCurrentCity({key:"215854",name:"Tel Aviv"})}openSnackBar(e){this._snackBar.open(e,"",{duration:3e3})}getPosition(){return new Promise((e,o)=>{navigator.geolocation.getCurrentPosition(a=>{e({lng:a.coords.longitude,lat:a.coords.latitude})},a=>{o(a)})})}unitChange(e){this.store.dispatch((0,g.r)({unit:e.value}))}getCurrentCity(e){this.currentCity$=this.homeService.getCurrentCity(e),this.checkIfFavorite$=this.homeService.checkIfFavorite(this.favoritesCities$,this.currentCity$),this.getFutureWeather(e.key)}getFutureWeather(e){this.futureWeather$=this.homeService.getFutureWeather(e)}manageFavorite(e){this.store.dispatch((0,g.F)(e))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_.yh),t.Y36(w),t.Y36(U.ux),t.Y36(l.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-home"]],decls:11,vars:6,consts:[[1,"home"],[1,"units"],[3,"value","change"],["value","C"],["value","F"],[3,"selectedCity"],[4,"ngIf"],[3,"currentCity","futureWeather","temperatureUnits","isFavorite","addFavorite"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"mat-button-toggle-group",2),t.NdJ("change",function(c){return o.unitChange(c)}),t.ALo(3,"async"),t.TgZ(4,"mat-button-toggle",3),t._uU(5,"Celsius"),t.qZA(),t.TgZ(6,"mat-button-toggle",4),t._uU(7,"Fahrenheit"),t.qZA()()(),t.TgZ(8,"app-autocomplete",5),t.NdJ("selectedCity",function(c){return o.getCurrentCity(c)}),t.qZA(),t.YNc(9,D,4,8,"ng-container",6),t.ALo(10,"async"),t.qZA()),2&e&&(t.xp6(2),t.Q6J("value",t.lcZ(3,2,o.temperatureUnits$)),t.xp6(7),t.Q6J("ngIf",t.lcZ(10,4,o.currentCity$)))},dependencies:[C.A9,C.Yi,s.O5,S,G,s.Ov],styles:[".home[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:1rem;gap:1rem}app-weather-box[_ngcontent-%COMP%]{width:100%}.units[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:flex-end}"]}),n})();const V=[{path:"",component:A,children:[{path:":key",component:A}]}];let b=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[l.Bz.forChild(V),l.Bz]}),n})(),R=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[Z.I,b]}),n})()}}]);